[build]
  command = "npm run build"
  publish = ".next"

[[plugins]]
  package = "@netlify/plugin-nextjs"

# Note: API calls are made directly from the browser to art.artigt.com on Netlify
# to avoid both Netlify API route 403 errors and Cloudflare bot challenges
# See app/lib/api.ts for the client-side logic

# Override cache headers for image proxy to prevent stale images
[[headers]]
  for = "/api/img"
  [headers.values]
    Cache-Control = "public, max-age=60, must-revalidate"
    Vary = "Accept-Encoding"

# General API routes - keep at 5 minutes
[[headers]]
  for = "/api/*"
  [headers.values]
    Cache-Control = "public, max-age=300, stale-while-revalidate=600"
